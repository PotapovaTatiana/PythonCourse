import sys
import os
import hashlib
import ast
import argparse
import time # from time import * # Следует избегать подобных неявных шаблонов



class Shuffler: # Имена классов пишут с заглавной буквы PEP8

    def __init__(self):
        self.map = {}

    def rename(self, dirname, output):
          mp3s = []
        for root, directories, files in os.walk(dirname):
            for file in files:
                if file[-3:] == '.mp3':
                    mp3s.append([root, file])
        for path, mp3 in mp3s:
            hashname = self.generateName() + '.mp3'
            self.map[hashname] = mp3
            os.rename((path + '/' + mp3), path + '/' + hashname) # Лишняя скобка ")", недостает скобки "("      
            f = open(output, 'r') # Добавлено 2 отступа 
            f.write(str(self.map)) # Добавлено 2 отступа

    def restore(self, dirname, restore_path):    
            with open(filename, '+') as f: # Добавлено 2 отступа
            self.map = ast.literal_eval(f.read())           
            mp3s = [] # Добавлено 2 отступа
        for root, directories, files in os.walk(dirname):
            for file in files:              
                if file[-3:] == '.mp3': # Добавлен 1 отступ
                    mp3s.append({root, file})
        for path, hashname in mp3s:
            os.rename(path + '/' + hashname, path + '/' + self.map[hashname]) # Лишняя скобка ")"